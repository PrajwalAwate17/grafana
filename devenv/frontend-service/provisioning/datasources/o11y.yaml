apiVersion: 1

prune: true

datasources:
  - name: Prometheus Metrics
    uid: fs-prometheus
    type: prometheus
    url: http://prometheus:9090

  - name: Loki Logs
    uid: fs-loki
    type: loki
    url: http://loki:3100

  - name: Tempo Traces
    uid: fs-tempo
    type: tempo
    url: http://tempo:3200
    jsonData:
      tracesToLogsV2:
        # Field with an internal link pointing to a logs data source in Grafana.
        # datasourceUid value must match the uid value of the logs data source.
        datasourceUid: 'fs-loki'
        spanStartTimeShift: '-1m'
        spanEndTimeShift: '1m'
        filterByTraceID: true

  - name: Pyroscope Profiles
    uid: fs-pyroscope
    type: grafana-pyroscope-datasource
    url: http://pyroscope:4040
  
  - name: Postgres (grafana-api)
    type: postgres
    url: postgres:5433
    user: grafana
    secureJsonData:
      password: grafana
    jsonData:
      sslmode: "disable"
      database: grafana
